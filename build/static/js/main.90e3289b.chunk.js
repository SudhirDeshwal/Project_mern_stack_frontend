(this.webpackJsonpmern_project_frontend=this.webpackJsonpmern_project_frontend||[]).push([[0],{29:function(e,t,a){e.exports=a(56)},3:function(e,t){t.signout=function(e){if("undefined"!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("https://merchsid.herokuapp.com/api/signout",{method:"GET"}).then((function(e){console.log("signout",e)})).catch((function(e){return console.log(e)}))},t.isAuthenticated=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))}},56:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(20),o=a.n(r),l=a(4),i=a(5),s=a(11),m=a(1),u=a(2),d=(a(7),a(3)),p=function(e,t){return e.location.pathname===t?{color:"#ff9900"}:{color:"#ffffff"}},f=Object(i.g)((function(e){var t=e.history;return c.a.createElement("div",null,c.a.createElement("nav",{id:"menu",className:"navbar navbar-default navbar-fixed-top bg-warning"},c.a.createElement("a",{className:"navbar-brand"},"booksForYou"),c.a.createElement("div",{className:"container"},c.a.createElement("ul",{className:"nav nav-tabs bg-secondary"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{className:"nav-link",style:p(t,"/"),to:"/"},"Home")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{className:"nav-link",style:p(t,"/shop"),to:"/shop"},"Shop")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{className:"nav-link",style:p(t,"/cart"),to:"/cart"},"Cart"," ",c.a.createElement("sup",null,c.a.createElement("small",{className:"cart-badge"},"undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0)))),Object(d.isAuthenticated)()&&0===Object(d.isAuthenticated)().user.role&&c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{className:"nav-link",style:p(t,"/user/dashboard"),to:"/user/dashboard"},"Dashboard")),Object(d.isAuthenticated)()&&1===Object(d.isAuthenticated)().user.role&&c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{className:"nav-link",style:p(t,"/admin/dashboard"),to:"/admin/dashboard"},"Dashboard")),!Object(d.isAuthenticated)()&&c.a.createElement(n.Fragment,null,c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{className:"nav-link",style:p(t,"/signin"),to:"/signin"},"SignIn")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.b,{className:"nav-link",style:p(t,"/signup"),to:"/signup"},"SignUp"))),Object(d.isAuthenticated)()&&c.a.createElement(n.Fragment,null,c.a.createElement("li",{className:"nav-item"},c.a.createElement("span",{className:"nav-link",style:{cursor:"pointer",color:"#ffffff"},onClick:function(){return Object(d.signout)((function(){t.push("/")}))}},"Signout")))))))})),h=function(e){var t=e.title,a=void 0===t?"Title":t,n=e.discription,r=void 0===n?"":n,o=e.className,l=e.children;return c.a.createElement("div",null,c.a.createElement(f,null),c.a.createElement("div",{className:"jumbotron"},c.a.createElement("h2",null,a),c.a.createElement("h4",{className:"lead"},r)),c.a.createElement("div",{className:o},l))},E=function(){var e=Object(n.useState)({email:" ",password:"",error:"",loading:!1,redirect:!1}),t=Object(u.a)(e,2),a=t[0],r=t[1],o=a.email,l=a.password,p=a.loading,f=a.error,E=a.redirect,b=Object(d.isAuthenticated)().user,g=function(e){return function(t){r(Object(m.a)(Object(m.a)({},a),{},Object(s.a)({error:!1},e,t.target.value)))}},N=function(e){e.preventDefault(),r(Object(m.a)(Object(m.a)({},a),{},{error:!1,loading:!0})),function(e){return console.log(e),fetch("https://merchsid.herokuapp.com/api/signin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"https://booklibs.herokuapp.com/"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}({email:o,password:l}).then((function(e){e.error?r(Object(m.a)(Object(m.a)({},a),{},{error:e.error,loading:!1})):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){r(Object(m.a)(Object(m.a)({},a),{},{redirect:!0}))}))}))};return c.a.createElement(h,{title:"Sign in here",discription:"Login your Account here!!!",className:"container col-md-8 offset-md-2"},p&&c.a.createElement("div",{className:"alert alert-info"},c.a.createElement("h2",null,"loading....")),c.a.createElement("div",{className:"alert alert-danger",style:{display:f?"":"none"}},f),c.a.createElement("section",{className:"container-fluid bg"},c.a.createElement("section",{className:"row justify-content-center"},c.a.createElement("section",{className:"col-8"},c.a.createElement("form",{className:"form-container"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Email"),c.a.createElement("input",{onChange:g("email"),type:"email",className:"form-control",value:o})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Password"),c.a.createElement("input",{onChange:g("password"),type:"password",className:"form-control",value:l})),c.a.createElement("button",{onClick:N,className:"btn btn-success"},"Submit"))))),E?b&&1===b.role?c.a.createElement(i.a,{to:"/admin/dashboard"}):c.a.createElement(i.a,{to:"/user/dashboard"}):Object(d.isAuthenticated)()?c.a.createElement(i.a,{to:"/"}):void 0)},b=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(u.a)(e,2),a=t[0],r=t[1],o=a.name,i=a.email,d=a.password,p=a.success,f=a.error,E=function(e){return function(t){r(Object(m.a)(Object(m.a)({},a),{},Object(s.a)({error:!1},e,t.target.value)))}},b=function(e){var t;e.preventDefault(),r(Object(m.a)(Object(m.a)({},a),{},{error:!1})),(t={name:o,email:i,password:d},console.log(t),fetch("https://merchsid.herokuapp.com/api/signup",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))).then((function(e){e.error?r(Object(m.a)(Object(m.a)({},a),{},{error:e.error,success:!1})):r(Object(m.a)(Object(m.a)({},a),{},{name:"",email:"",password:"",error:"",success:!0}))}))};return c.a.createElement(h,{title:"Sign up here",discription:"Create an Account",className:"container col-md-8 offset-md-2"},c.a.createElement("div",{className:"alert alert-info",style:{display:p?"":"none"}},"New account is created. Please ",c.a.createElement(l.b,{to:"/signin"},"Signin")),c.a.createElement("div",{className:"alert alert-danger",style:{display:f?"":"none"}},f),c.a.createElement("section",{className:"row justify-content-center"},c.a.createElement("section",{className:"col-8 "},c.a.createElement("form",{className:"form-container"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Name"),c.a.createElement("input",{onChange:E("name"),type:"text",className:"form-control",value:o})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Email"),c.a.createElement("input",{onChange:E("email"),type:"email",className:"form-control",value:i})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Password"),c.a.createElement("input",{onChange:E("password"),type:"password",className:"form-control",value:d})),c.a.createElement("button",{onClick:b,className:"btn btn-success"},"Submit")))))},g=function(e){return fetch("https://merchsid.herokuapp.com/api/products?sortBy=".concat(e,"&order=desc&limit=15"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},N=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={limit:t,skip:e,filters:a};return fetch("https://merchsid.herokuapp.com/api/products/by/search",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},v=function(e){var t=e.item,a=e.url;return c.a.createElement("div",{className:"card-img-top img-fluid"},c.a.createElement("img",{src:"https://merchsid.herokuapp.com/api/".concat(a,"/photo/").concat(t._id),alt:t.name,className:"mb-3",style:{maxHeight:"100%",maxWidth:"100%"}}))},j=a(27),O=a.n(j),y=function(e){var t=e.product,a=e.showViewProductButton,r=void 0===a||a,o=e.showAddToCartButton,s=void 0===o||o,d=e.cartUpdate,p=void 0!==d&&d,f=e.showRemoveProductButton,h=void 0!==f&&f,E=e.setRun,b=void 0===E?function(e){return e}:E,g=e.run,N=void 0===g?void 0:g,j=Object(n.useState)(!1),y=Object(u.a)(j,2),S=y[0],k=y[1],w=Object(n.useState)(t.count),A=Object(u.a)(w,2),C=A[0],x=A[1],P=function(){console.log("added"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.push(Object(m.a)(Object(m.a)({},e),{},{count:1})),a=Array.from(new Set(a.map((function(e){return e._id})))).map((function(e){return a.find((function(t){return t._id===e}))})),localStorage.setItem("cart",JSON.stringify(a)),t())}(t,k(!0))},T=function(e){return function(t){b(!N),x(t.target.value<1?1:t.target.value),t.target.value>=1&&function(e,t){var a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.map((function(n,c){n._id===e&&(a[c].count=t)})),localStorage.setItem("cart",JSON.stringify(a)))}(e,t.target.value)}};return c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header name"},t.name),c.a.createElement("div",{className:"card-body"},function(e){if(e)return c.a.createElement(i.a,{to:"/cart"})}(S),c.a.createElement(v,{item:t,url:"product"}),c.a.createElement("p",{className:"lead mt-2"},t.description),c.a.createElement("p",{className:"black-10"},"$",t.price),c.a.createElement("p",{className:"black-9"}," Category: ",t.category&&t.category.name),c.a.createElement("p",{className:"black-8"}," Added On ",O()(t.createdAt).fromNow()),t.quantity>0?c.a.createElement("span",{className:"badge badge-primary badge-pill"},"In Stock "):c.a.createElement("span",{className:"badge badge-primary badge-pill"},"Out of Stock "),c.a.createElement("br",null),function(e){return e&&c.a.createElement(l.b,{to:"/product/".concat(t._id),className:"mr-1"},c.a.createElement("button",{className:"btn btn-outline-primary mt-2 mb-2 card-btn-1"},"View Product"))}(r),function(e){return e&&c.a.createElement("button",{onClick:P,className:"btn btn-outline-warning mt-2 mb-2 card-btn-1  "},"Add to cart")}(s),function(e){return e&&c.a.createElement("button",{onClick:function(){!function(e){var t=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(a,n){a._id===e&&t.splice(n,1)})),localStorage.setItem("cart",JSON.stringify(t)))}(t._id),b(!N)},className:"btn btn-outline-danger mt-2 mb-2"},"Remove Product")}(h),function(e){return e&&c.a.createElement("div",null,c.a.createElement("div",{className:"input-group mb-3"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("span",{className:"input-group-text"},"Adjust Quantity")),c.a.createElement("input",{type:"number",className:"form-control",value:C,onChange:T(t._id)})))}(p)))},S=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),l=Object(u.a)(o,2),i=l[0],s=l[1],m=Object(n.useState)(!1),d=Object(u.a)(m,2),p=(d[0],d[1]);return Object(n.useEffect)((function(){g("createdAt").then((function(e){console.log(e),e.error?p(e.error):s(e)})),g("sold").then((function(e){e.error?p(e.error):r(e)}))}),[]),c.a.createElement(h,{title:"Welcome",discription:"Buy your favourite books here!!!",className:"container-fluid"},c.a.createElement("h2",{className:"mb-4"},"New Arrivals"),c.a.createElement("div",{className:"row"},i.map((function(e,t){return c.a.createElement("div",{key:t,className:"col-2 mb-3"},c.a.createElement(y,{product:e}))}))),c.a.createElement("h2",{className:"mb-4"},"Best Sellers"),c.a.createElement("div",{className:"row"},a.map((function(e,t){return c.a.createElement("div",{key:t,className:"col-2 mb-3"},c.a.createElement(y,{product:e}))}))))},k=a(18),w=function(e){var t=e.component,a=Object(k.a)(e,["component"]);return c.a.createElement(i.b,Object.assign({},a,{render:function(e){return Object(d.isAuthenticated)()?c.a.createElement(t,e):c.a.createElement(i.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},A=function(){var e=Object(d.isAuthenticated)().user,t=(e._id,e.name),a=e.email,n=e.role;return c.a.createElement(h,{title:"Welcome ".concat(t,"!")},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-3"},c.a.createElement("div",{className:"card"},c.a.createElement("h4",{className:"card-header"},"User Links"),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},c.a.createElement(l.b,{className:"nav-link",to:"/cart"},"My Cart"))))),c.a.createElement("div",{className:"col-9"},c.a.createElement("div",{className:"card mb-5"},c.a.createElement("h3",{className:"card-header"},"User Information"),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},t),c.a.createElement("li",{className:"list-group-item"},a),c.a.createElement("li",{className:"list-group-item"},1===n?"Admin":"Registered User"))))))},C=function(e){var t=e.component,a=Object(k.a)(e,["component"]);return c.a.createElement(i.b,Object.assign({},a,{render:function(e){return Object(d.isAuthenticated)()&&1===Object(d.isAuthenticated)().user.role?c.a.createElement(t,e):c.a.createElement(i.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},x=function(){var e=Object(d.isAuthenticated)().user,t=(e._id,e.name),a=e.email,n=e.role;return c.a.createElement(h,{title:"Welcome ".concat(t,"!")},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-3"},c.a.createElement("div",{className:"card"},c.a.createElement("h4",{className:"card-header"},"Admin Links"),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},c.a.createElement(l.b,{className:"nav-link",to:"/create/category"},"Create Category")),c.a.createElement("li",{className:"list-group-item"},c.a.createElement(l.b,{className:"nav-link",to:"/create/product"},"Create Product")),c.a.createElement("li",{className:"list-group-item"},c.a.createElement(l.b,{className:"nav-link",to:"/admin/products"},"Manage Products"))))),c.a.createElement("div",{className:"col-9"},c.a.createElement("div",{className:"card mb-5"},c.a.createElement("h3",{className:"card-header"},"Admin Information"),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},t),c.a.createElement("li",{className:"list-group-item"},a),c.a.createElement("li",{className:"list-group-item"},1===n?"Admin":"Registered User"))))))},P=function(){return fetch("https://merchsid.herokuapp.com/api/categories",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},T=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),i=Object(u.a)(o,2),s=i[0],m=i[1],p=Object(n.useState)(!1),f=Object(u.a)(p,2),E=f[0],b=f[1],g=Object(d.isAuthenticated)(),N=g.user,v=g.token,j=function(e){m(""),r(e.target.value)},O=function(e){e.preventDefault(),m(""),b(!1),function(e,t,a){return fetch("https://merchsid.herokuapp.com/api/category/create/".concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(N._id,v,{name:a}).then((function(e){e.error?m(e.error):(m(""),b(!0))}))};return c.a.createElement(h,{title:"Add a new category",description:"G'day ".concat(N.name,", ready to add a new category?")},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-8 offset-md-2"},function(){if(E)return c.a.createElement("h3",{className:"text-success"},a," is created")}(),function(){if(s)return c.a.createElement("h3",{className:"text-danger"},"Category should be unique")}(),c.a.createElement("form",{onSubmit:O},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Name"),c.a.createElement("input",{type:"text",className:"form-control",onChange:j,value:a,autoFocus:!0,required:!0})),c.a.createElement("button",{className:"btn btn-outline-primary"},"Create Category")),c.a.createElement("div",{className:"mt-5"},c.a.createElement(l.b,{to:"/admin/dashboard",className:"text-warning"},"Back to Dashboard")))))},_=function(){var e=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:"",createdProduct:"",redirectToProfile:!1,formData:""}),t=Object(u.a)(e,2),a=t[0],r=t[1],o=Object(d.isAuthenticated)(),l=o.user,i=o.token,p=a.name,f=a.description,E=a.price,b=a.categories,g=(a.category,a.shipping,a.quantity),N=a.loading,v=a.error,j=a.createdProduct,O=(a.redirectToProfile,a.formData);Object(n.useEffect)((function(){P().then((function(e){e.error?r(Object(m.a)(Object(m.a)({},a),{},{error:e.error})):r(Object(m.a)(Object(m.a)({},a),{},{categories:e,formData:new FormData}))}))}),[]);var y=function(e){return function(t){var n="photo"===e?t.target.files[0]:t.target.value;O.set(e,n),r(Object(m.a)(Object(m.a)({},a),{},Object(s.a)({},e,n)))}},S=function(e){e.preventDefault(),r(Object(m.a)(Object(m.a)({},a),{},{error:"",loading:!0})),function(e,t,a){return fetch("https://merchsid.herokuapp.com/api/product/create/".concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(l._id,i,O).then((function(e){e.error?r(Object(m.a)(Object(m.a)({},a),{},{error:e.error})):r(Object(m.a)(Object(m.a)({},a),{},{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,createdProduct:e.name}))}))};return c.a.createElement(h,{title:"Add a new Product",description:"G'day ".concat(l.name,", ready to add a new category?")},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-8 offset-md-2"},N&&c.a.createElement("div",{className:"alert alert-success"},c.a.createElement("h2",null,"Loading...")),c.a.createElement("div",{className:"alert alert-info",style:{display:j?"":"none"}},c.a.createElement("h2",null,"".concat(j)," is created!")),c.a.createElement("div",{className:"alert alert-danger",style:{display:v?"":"none"}},v),c.a.createElement("form",{className:"mb-3",onSubmit:S},c.a.createElement("h4",null,"Post Photo"),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"btn btn-secondary"},c.a.createElement("input",{onChange:y("photo"),type:"file",name:"photo",accept:"image/*"}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Name"),c.a.createElement("input",{onChange:y("name"),type:"text",className:"form-control",value:p})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Description"),c.a.createElement("textarea",{onChange:y("description"),className:"form-control",value:f})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Price"),c.a.createElement("input",{onChange:y("price"),type:"number",className:"form-control",value:E})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Category"),c.a.createElement("select",{onChange:y("category"),className:"form-control"},c.a.createElement("option",null,"Please select"),b&&b.map((function(e,t){return c.a.createElement("option",{key:t,value:e._id},e.name)})))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Shipping"),c.a.createElement("select",{onChange:y("shipping"),className:"form-control"},c.a.createElement("option",null,"Please select"),c.a.createElement("option",{value:"0"},"No"),c.a.createElement("option",{value:"1"},"Yes"))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Quantity"),c.a.createElement("input",{onChange:y("quantity"),type:"number",className:"form-control",value:g})),c.a.createElement("button",{className:"btn btn-outline-primary"},"Create Product")))))},I=a(16),D=function(e){var t=e.categories,a=e.handleFilters,r=Object(n.useState)([]),o=Object(u.a)(r,2),l=o[0],i=o[1],s=function(e){return function(){var t=l.indexOf(e),n=Object(I.a)(l);-1===t?n.push(e):n.splice(t,1),i(n),a(n)}};return t.map((function(e,t){return c.a.createElement("li",{key:t,className:"list-unstyled"},c.a.createElement("input",{onChange:s(e._id),value:l.indexOf(-1===e._id),type:"checkbox",className:"form-check-input"}),c.a.createElement("label",{className:"form-check-label"},e.name))}))},B=[{_id:0,name:"Any",array:[]},{_id:1,name:"$0 to $9",array:[0,9]},{_id:2,name:"$10 to $19",array:[10,19]},{_id:3,name:"$20 to $29",array:[20,29]},{_id:4,name:"$30 to $39",array:[20,29]},{_id:5,name:"More than $40",array:[40,99]}],J=function(e){var t=e.prices,a=e.handleFilters,r=Object(n.useState)(0),o=Object(u.a)(r,2),l=(o[0],o[1]),i=function(e){a(e.target.value),l(e.target.value)};return t.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("input",{onChange:i,value:"".concat(e._id),name:e,type:"radio",className:"mr-2 ml-4"}),c.a.createElement("label",{className:"form-check-label"},e.name))}))},U=function(){var e=Object(n.useState)({filters:{category:[],price:[]}}),t=Object(u.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),l=Object(u.a)(o,2),i=l[0],s=l[1],d=Object(n.useState)(!1),p=Object(u.a)(d,2),f=(p[0],p[1]),E=Object(n.useState)(6),b=Object(u.a)(E,2),g=b[0],v=(b[1],Object(n.useState)(0)),j=Object(u.a)(v,2),O=j[0],S=j[1],k=Object(n.useState)(0),w=Object(u.a)(k,2),A=w[0],C=w[1],x=Object(n.useState)([]),P=Object(u.a)(x,2),T=P[0],_=P[1],U=function(){fetch("https://merchsid.herokuapp.com/api/categories",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?f(e.error):s(e)}))},q=function(e){N(O,g,e).then((function(e){e.error?f(e.error):(_(e.data),C(e.size),S(0))}))},F=function(){var e=O+g;N(e,g,a.filters).then((function(t){t.error?f(t.error):(_([].concat(Object(I.a)(T),Object(I.a)(t.data))),C(t.size),S(e))}))};Object(n.useEffect)((function(){U(),q(O,a.filters)}),[]);var G=function(e,t){var n=Object(m.a)({},a);if(n.filters[t]=e,"price"===t){var c=$(e);n.filters[t]=c}q(a.filters),r(n)},$=function(e){var t=B,a=[];for(var n in t)t[n]._id===parseInt(e)&&(a=t[n].array);return a};return c.a.createElement(h,{title:"Shop Page",discription:"Buy books here as per filters and categories",className:"container-fluid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-2"},c.a.createElement("h4",null,"Filter by categories"),c.a.createElement("ul",null,c.a.createElement(D,{categories:i,handleFilters:function(e){return G(e,"category")}})),c.a.createElement("h4",null,"Filter by price range"),c.a.createElement("div",null,c.a.createElement(J,{prices:B,handleFilters:function(e){return G(e,"price")}}))),c.a.createElement("div",{className:"col-10"},c.a.createElement("h2",{className:"mb-4"},"Products"),c.a.createElement("div",{className:"row"},T.map((function(e,t){return c.a.createElement("div",{key:t,className:"col-2 mb-3"},c.a.createElement(y,{product:e}))}))),c.a.createElement("hr",null),A>0&&A>=g&&c.a.createElement("button",{onClick:F,className:"btn btn-warning mb-5"},"Load more"))))},q=function(e){var t=Object(n.useState)({}),a=Object(u.a)(t,2),r=a[0],o=a[1],l=Object(n.useState)([]),i=Object(u.a)(l,2),s=i[0],m=i[1],d=Object(n.useState)(!1),p=Object(u.a)(d,2),f=(p[0],p[1]),E=function(e){(function(e){return fetch("https://merchsid.herokuapp.com/api/product/".concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?f(e.error):(o(e),function(e){return fetch("https://merchsid.herokuapp.com/api/products/related/".concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e._id).then((function(e){e.error?f(e.error):m(e)})))}))};return Object(n.useEffect)((function(){var t=e.match.params.productId;E(t)}),[e]),c.a.createElement(h,{title:r&&r.name,discription:r&&r.description&&r.description.substring(0,100),className:"container-fluid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-8 mb-3"},r&&r.description&&c.a.createElement(y,{product:r,showViewProductButton:!1})),c.a.createElement("div",{className:"col-4"},c.a.createElement("h4",null,"Related products"),s.map((function(e,t){return c.a.createElement("div",{className:"mb-3",key:t},c.a.createElement(y,{product:e}))})))))},F=(a(39),a(28)),G=a.n(F),$=function(e){var t=e.products,a=Object(n.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{}}),r=Object(u.a)(a,2),o=r[0],i=r[1],s=Object(d.isAuthenticated)()&&Object(d.isAuthenticated)().user._id,p=Object(d.isAuthenticated)()&&Object(d.isAuthenticated)().token,f=function(e,t){(function(e,t){return fetch("https://merchsid.herokuapp.com/api/braintree/getToken/".concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?(console.log(e.error),i(Object(m.a)(Object(m.a)({},e),{},{error:e.error}))):(console.log(e),i({clientToken:e.clientToken}))}))};Object(n.useEffect)((function(){f(s,p)}),[]);return c.a.createElement("div",null,c.a.createElement("h2",null,"Total: $",t.reduce((function(e,t){return e+t.count*t.price}),0)),Object(d.isAuthenticated)()?c.a.createElement("div",null,c.a.createElement("div",null,null!==o.clientToken&&t.length>0?c.a.createElement("div",null,c.a.createElement(G.a,{options:{authorization:o.clientToken},onInstance:function(e){return o.instance=e}}),c.a.createElement("button",{className:"btn btn-success btn-block"},"Pay"),c.a.createElement("div",{class:"alert alert-primary",role:"alert"},"Thank you for showing your interest in Buying our Products."),c.a.createElement("div",{class:"alert alert-warning",role:"alert"},"Unfortunately ,We are not accepting any payments as of now.")):null)):c.a.createElement(l.b,{to:"/signin"},c.a.createElement("button",{className:"btn btn-primary"},"Sign in to checkout")))},R=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),i=Object(u.a)(o,2),s=i[0],m=i[1];Object(n.useEffect)((function(){r("undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])}),[s]);return c.a.createElement(h,{title:"Shopping Cart",description:"Manage your cart items. Add remove checkout or continue shopping.",className:"container-fluid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-6"},a.length>0?function(e){return c.a.createElement("div",null,c.a.createElement("h2",null,"Your cart has ","".concat(e.length)," items"),c.a.createElement("hr",null),e.map((function(e,t){return c.a.createElement(y,{key:t,product:e,showAddToCartButton:!1,cartUpdate:!0,showRemoveProductButton:!0,setRun:m,run:s})})))}(a):c.a.createElement("h2",null,"Your cart is empty. ",c.a.createElement("br",null)," ",c.a.createElement(l.b,{to:"/shop"},"Continue shopping"))),c.a.createElement("div",{className:"col-6"},c.a.createElement("h2",{className:"mb-4"},"Your cart summary"),c.a.createElement("hr",null),c.a.createElement($,{products:a}))))},z=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],r=t[1],o=Object(d.isAuthenticated)(),i=o.user,s=o.token,m=function(){fetch("https://merchsid.herokuapp.com/api/products?limit=undefined",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?console.log(e.error):r(e)}))},p=function(e){(function(e,t,a){return fetch("https://merchsid.herokuapp.com/api/product/".concat(e,"/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,i._id,s).then((function(e){e.error?console.log(e.error):m()}))};return Object(n.useEffect)((function(){m()}),[]),c.a.createElement(h,{title:"Manage Products",discription:"Perform CRUD on products",className:"container-fluid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("h2",{className:"text-center"},"Total ",a.length," products"),c.a.createElement("hr",null),c.a.createElement("ul",{className:"list-group"},a.map((function(e,t){return c.a.createElement("li",{key:t,className:"list-group-item d-flex justify-content-between align-items-center"},c.a.createElement("strong",null,e.name),c.a.createElement(l.b,{to:"/admin/product/update/".concat(e._id)},c.a.createElement("span",{className:"badge badge-warning badge-pill"},"Update")),c.a.createElement("span",{onClick:function(){return p(e._id)},className:"badge badge-danger badge-pill"},"Delete"))}))),c.a.createElement("br",null))))},L=function(e){var t=e.match,a=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:"",createdProduct:"",redirectToProfile:!1,formData:""}),r=Object(u.a)(a,2),o=r[0],l=r[1],p=Object(d.isAuthenticated)(),f=p.user,E=p.token,b=o.name,g=o.description,N=o.price,v=o.categories,j=o.quantity,O=o.loading,y=o.error,S=o.createdProduct,k=o.redirectToProfile,w=o.formData,A=function(e){(function(e){return fetch("https://merchsid.herokuapp.com/api/product/".concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?l(Object(m.a)(Object(m.a)({},o),{},{error:e.error})):(l(Object(m.a)(Object(m.a)({},o),{},{name:e.name,description:e.description,price:e.price,category:e.category._id,shipping:e.shipping,quantity:e.quantity,formData:new FormData})),C())}))},C=function(){P().then((function(e){e.error?l(Object(m.a)(Object(m.a)({},o),{},{error:e.error})):l({categories:e,formData:new FormData})}))};Object(n.useEffect)((function(){A(t.params.productId)}),[]);var x=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;w.set(e,a),l(Object(m.a)(Object(m.a)({},o),{},Object(s.a)({},e,a)))}},T=function(e){e.preventDefault(),l(Object(m.a)(Object(m.a)({},o),{},{error:"",loading:!0})),function(e,t,a,n){return fetch("https://merchsid.herokuapp.com/api/product/".concat(e,"/").concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)},body:n}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.productId,f._id,E,w).then((function(e){e.error?l(Object(m.a)(Object(m.a)({},o),{},{error:e.error})):l(Object(m.a)(Object(m.a)({},o),{},{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,error:!1,redirectToProfile:!0,createdProduct:e.name}))}))};return c.a.createElement(h,{title:"Update a Product",description:"G'day ".concat(f.name,", ready to add a new category?")},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-8 offset-md-2"},O&&c.a.createElement("div",{className:"alert alert-success"},c.a.createElement("h2",null,"Loading...")),c.a.createElement("div",{className:"alert alert-info",style:{display:S?"":"none"}},c.a.createElement("h2",null,"".concat(S)," is Updated!")),c.a.createElement("div",{className:"alert alert-danger",style:{display:y?"":"none"}},y),c.a.createElement("form",{className:"mb-3",onSubmit:T},c.a.createElement("h4",null,"Post Photo"),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"btn btn-secondary"},c.a.createElement("input",{onChange:x("photo"),type:"file",name:"photo",accept:"image/*"}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Name"),c.a.createElement("input",{onChange:x("name"),type:"text",className:"form-control",value:b})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Description"),c.a.createElement("textarea",{onChange:x("description"),className:"form-control",value:g})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Price"),c.a.createElement("input",{onChange:x("price"),type:"number",className:"form-control",value:N})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Category"),c.a.createElement("select",{onChange:x("category"),className:"form-control"},c.a.createElement("option",null,"Please select"),v&&v.map((function(e,t){return c.a.createElement("option",{key:t,value:e._id},e.name)})))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Shipping"),c.a.createElement("select",{onChange:x("shipping"),className:"form-control"},c.a.createElement("option",null,"Please select"),c.a.createElement("option",{value:"0"},"No"),c.a.createElement("option",{value:"1"},"Yes"))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Quantity"),c.a.createElement("input",{onChange:x("quantity"),type:"number",className:"form-control",value:j})),c.a.createElement("button",{className:"btn btn-outline-primary"},"Update Product")),function(){if(k&&!y)return c.a.createElement(i.a,{to:"/"})}())))},Y=function(){return c.a.createElement(l.a,null,c.a.createElement(i.d,null,c.a.createElement(i.b,{path:"/Signin",exact:!0,component:E}),c.a.createElement(i.b,{path:"/Signup",exact:!0,component:b}),c.a.createElement(i.b,{path:"/shop",exact:!0,component:U}),c.a.createElement(i.b,{path:"/",exact:!0,component:S}),c.a.createElement(i.b,{path:"/cart",exact:!0,component:R}),c.a.createElement(i.b,{path:"/product/:productId",exact:!0,component:q}),c.a.createElement(w,{path:"/user/dashboard",exact:!0,component:A}),c.a.createElement(C,{path:"/admin/dashboard",exact:!0,component:x}),c.a.createElement(C,{path:"/create/category",exact:!0,component:T}),c.a.createElement(C,{path:"/create/product",exact:!0,component:_}),c.a.createElement(C,{path:"/admin/products",exact:!0,component:z}),c.a.createElement(C,{path:"/admin/product/update/:productId",exact:!0,component:L})))};o.a.render(c.a.createElement(Y,null),document.getElementById("root"))},7:function(e,t,a){}},[[29,1,2]]]);
//# sourceMappingURL=main.90e3289b.chunk.js.map